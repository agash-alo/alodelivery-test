{"ast":null,"code":"import { Injectable, InjectionToken, Component, ElementRef, Renderer2, HostListener, EventEmitter, Directive, ViewContainerRef, Optional, Inject, Input, Output, RendererFactory2, NgModule } from '@angular/core';\nimport { isBs3, Utils, document as document$1, window as window$1 } from 'ngx-bootstrap/utils';\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { PositioningService } from 'ngx-bootstrap/positioning';\nimport { FocusTrapModule } from 'ngx-bootstrap/focus-trap';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass BsModalRef {\n  constructor() {\n    /**\n     * Hides the modal\n     */\n    this.hide = () => void 0;\n    /**\n     * Sets new class to modal window\n     */\n    this.setClass = () => void 0;\n  }\n}\nBsModalRef.decorators = [{\n  type: Injectable\n}];\nclass ModalBackdropOptions {\n  constructor(options) {\n    this.animate = true;\n    Object.assign(this, options);\n  }\n}\nclass ModalOptions {}\nModalOptions.decorators = [{\n  type: Injectable\n}];\nconst modalConfigDefaults = {\n  backdrop: true,\n  keyboard: true,\n  focus: true,\n  show: false,\n  ignoreBackdropClick: false,\n  class: '',\n  animated: true,\n  initialState: {},\n  closeInterceptor: void 0\n};\nconst MODAL_CONFIG_DEFAULT_OVERRIDE = new InjectionToken('override-default-config');\nconst CLASS_NAME = {\n  SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\n  BACKDROP: 'modal-backdrop',\n  OPEN: 'modal-open',\n  FADE: 'fade',\n  IN: 'in',\n  SHOW: 'show' // bs4\n};\n\nconst SELECTOR = {\n  DIALOG: '.modal-dialog',\n  DATA_TOGGLE: '[data-toggle=\"modal\"]',\n  DATA_DISMISS: '[data-dismiss=\"modal\"]',\n  FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom, .is-fixed'\n};\nconst TRANSITION_DURATIONS = {\n  MODAL: 300,\n  BACKDROP: 150\n};\nconst DISMISS_REASONS = {\n  BACKRDOP: 'backdrop-click',\n  ESC: 'esc',\n  BACK: 'browser-back-navigation-clicked'\n};\nclass ModalContainerComponent {\n  constructor(options, _element, _renderer) {\n    this._element = _element;\n    this._renderer = _renderer;\n    this.isShown = false;\n    this.isAnimated = false;\n    this.isModalHiding = false;\n    this.clickStartedInContent = false;\n    this.config = Object.assign({}, options);\n  }\n  ngOnInit() {\n    if (this.isAnimated) {\n      this._renderer.addClass(this._element.nativeElement, CLASS_NAME.FADE);\n    }\n    this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n    setTimeout(() => {\n      this.isShown = true;\n      this._renderer.addClass(this._element.nativeElement, isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW);\n    }, this.isAnimated ? TRANSITION_DURATIONS.BACKDROP : 0);\n    if (document && document.body) {\n      if (this.bsModalService && this.bsModalService.getModalsCount() === 1) {\n        this.bsModalService.checkScrollbar();\n        this.bsModalService.setScrollbar();\n      }\n      this._renderer.addClass(document.body, CLASS_NAME.OPEN);\n      this._renderer.setStyle(document.body, 'overflow-y', 'hidden');\n    }\n    if (this._element.nativeElement) {\n      this._element.nativeElement.focus();\n    }\n  }\n  onClickStarted(event) {\n    this.clickStartedInContent = event.target !== this._element.nativeElement;\n  }\n  onClickStop(event) {\n    var _a;\n    const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n    if (this.config.ignoreBackdropClick || this.config.backdrop === 'static' || !clickedInBackdrop) {\n      this.clickStartedInContent = false;\n      return;\n    }\n    (_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.setDismissReason(DISMISS_REASONS.BACKRDOP);\n    this.hide();\n  }\n  onPopState() {\n    var _a;\n    (_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.setDismissReason(DISMISS_REASONS.BACK);\n    this.hide();\n  }\n  onEsc(event) {\n    var _a, _b;\n    if (!this.isShown) {\n      return;\n    }\n    if (event.keyCode === 27 || event.key === 'Escape') {\n      event.preventDefault();\n    }\n    if (this.config.keyboard && this.level === ((_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.getModalsCount())) {\n      (_b = this.bsModalService) === null || _b === void 0 ? void 0 : _b.setDismissReason(DISMISS_REASONS.ESC);\n      this.hide();\n    }\n  }\n  ngOnDestroy() {\n    if (this.isShown) {\n      this._hide();\n    }\n  }\n  hide() {\n    if (this.isModalHiding || !this.isShown) {\n      return;\n    }\n    if (this.config.closeInterceptor) {\n      this.config.closeInterceptor().then(() => this._hide(), () => undefined);\n      return;\n    }\n    this._hide();\n  }\n  _hide() {\n    this.isModalHiding = true;\n    this._renderer.removeClass(this._element.nativeElement, isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW);\n    setTimeout(() => {\n      var _a, _b;\n      this.isShown = false;\n      if (document && document.body && ((_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.getModalsCount()) === 1) {\n        this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n        this._renderer.setStyle(document.body, 'overflow-y', '');\n      }\n      (_b = this.bsModalService) === null || _b === void 0 ? void 0 : _b.hide(this.config.id);\n      this.isModalHiding = false;\n    }, this.isAnimated ? TRANSITION_DURATIONS.MODAL : 0);\n  }\n}\nModalContainerComponent.decorators = [{\n  type: Component,\n  args: [{\n    selector: 'modal-container',\n    template: `\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\"\n         role=\"document\"\n         focusTrap>\n      <div class=\"modal-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  `,\n    // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n    host: {\n      class: 'modal',\n      role: 'dialog',\n      tabindex: '-1',\n      '[attr.aria-modal]': 'true',\n      '[attr.aria-labelledby]': 'config.ariaLabelledBy',\n      '[attr.aria-describedby]': 'config.ariaDescribedby'\n    }\n  }]\n}];\nModalContainerComponent.ctorParameters = () => [{\n  type: ModalOptions\n}, {\n  type: ElementRef\n}, {\n  type: Renderer2\n}];\nModalContainerComponent.propDecorators = {\n  onClickStarted: [{\n    type: HostListener,\n    args: ['mousedown', ['$event']]\n  }],\n  onClickStop: [{\n    type: HostListener,\n    args: ['click', ['$event']]\n  }],\n  onPopState: [{\n    type: HostListener,\n    args: ['window:popstate']\n  }],\n  onEsc: [{\n    type: HostListener,\n    args: ['window:keydown.esc', ['$event']]\n  }]\n};\n\n/** This component will be added as background layout for modals if enabled */\nclass ModalBackdropComponent {\n  constructor(element, renderer) {\n    this._isAnimated = false;\n    this._isShown = false;\n    this.element = element;\n    this.renderer = renderer;\n  }\n  get isAnimated() {\n    return this._isAnimated;\n  }\n  set isAnimated(value) {\n    this._isAnimated = value;\n  }\n  get isShown() {\n    return this._isShown;\n  }\n  set isShown(value) {\n    this._isShown = value;\n    if (value) {\n      this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\n    } else {\n      this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\n    }\n    if (!isBs3()) {\n      if (value) {\n        this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.SHOW}`);\n      } else {\n        this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.SHOW}`);\n      }\n    }\n  }\n  ngOnInit() {\n    if (this.isAnimated) {\n      this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.FADE}`);\n      Utils.reflow(this.element.nativeElement);\n    }\n    this.isShown = true;\n  }\n}\nModalBackdropComponent.decorators = [{\n  type: Component,\n  args: [{\n    selector: 'bs-modal-backdrop',\n    template: ' ',\n    // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n    host: {\n      class: CLASS_NAME.BACKDROP\n    }\n  }]\n}];\nModalBackdropComponent.ctorParameters = () => [{\n  type: ElementRef\n}, {\n  type: Renderer2\n}];\n\n// todo: should we support enforce focus in?\nconst TRANSITION_DURATION = 300;\nconst BACKDROP_TRANSITION_DURATION = 150;\n/** Mark any code with directive to show it's content in modal */\nclass ModalDirective {\n  constructor(_element, _viewContainerRef, _renderer, clf, modalDefaultOption) {\n    this._element = _element;\n    this._renderer = _renderer;\n    /** This event fires immediately when the `show` instance method is called. */\n    this.onShow = new EventEmitter();\n    /** This event is fired when the modal has been made visible to the user\n     * (will wait for CSS transitions to complete)\n     */\n    this.onShown = new EventEmitter();\n    /** This event is fired immediately when\n     * the hide instance method has been called.\n     */\n    this.onHide = new EventEmitter();\n    /** This event is fired when the modal has finished being\n     * hidden from the user (will wait for CSS transitions to complete).\n     */\n    this.onHidden = new EventEmitter();\n    this._isShown = false;\n    this.isBodyOverflowing = false;\n    this.originalBodyPadding = 0;\n    this.scrollbarWidth = 0;\n    this.timerHideModal = 0;\n    this.timerRmBackDrop = 0;\n    this.isNested = false;\n    this.clickStartedInContent = false;\n    this._backdrop = clf.createLoader(_element, _viewContainerRef, _renderer);\n    this._config = modalDefaultOption || modalConfigDefaults;\n  }\n  /** allows to set modal configuration via element property */\n  set config(conf) {\n    this._config = this.getConfig(conf);\n  }\n  get config() {\n    return this._config;\n  }\n  get isShown() {\n    return this._isShown;\n  }\n  onClickStarted(event) {\n    this.clickStartedInContent = event.target !== this._element.nativeElement;\n  }\n  onClickStop(event) {\n    const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n    if (this.config.ignoreBackdropClick || this.config.backdrop === 'static' || !clickedInBackdrop) {\n      this.clickStartedInContent = false;\n      return;\n    }\n    this.dismissReason = DISMISS_REASONS.BACKRDOP;\n    this.hide(event);\n  }\n  // todo: consider preventing default and stopping propagation\n  onEsc(event) {\n    if (!this._isShown) {\n      return;\n    }\n    if (event.keyCode === 27 || event.key === 'Escape') {\n      event.preventDefault();\n    }\n    if (this.config.keyboard) {\n      this.dismissReason = DISMISS_REASONS.ESC;\n      this.hide();\n    }\n  }\n  ngOnDestroy() {\n    if (this._isShown) {\n      this._isShown = false;\n      this.hideModal();\n      this._backdrop.dispose();\n    }\n  }\n  ngOnInit() {\n    this._config = this._config || this.getConfig();\n    setTimeout(() => {\n      if (this._config.show) {\n        this.show();\n      }\n    }, 0);\n  }\n  /* Public methods */\n  /** Allows to manually toggle modal visibility */\n  toggle() {\n    return this._isShown ? this.hide() : this.show();\n  }\n  /** Allows to manually open modal */\n  show() {\n    this.dismissReason = void 0;\n    this.onShow.emit(this);\n    if (this._isShown) {\n      return;\n    }\n    clearTimeout(this.timerHideModal);\n    clearTimeout(this.timerRmBackDrop);\n    this._isShown = true;\n    this.checkScrollbar();\n    this.setScrollbar();\n    if (document$1 && document$1.body) {\n      if (document$1.body.classList.contains(CLASS_NAME.OPEN)) {\n        this.isNested = true;\n      } else {\n        this._renderer.addClass(document$1.body, CLASS_NAME.OPEN);\n        this._renderer.setStyle(document$1.body, 'overflow-y', 'hidden');\n      }\n    }\n    this.showBackdrop(() => {\n      this.showElement();\n    });\n  }\n  /** Check if we can close the modal */\n  hide(event) {\n    if (!this._isShown) {\n      return;\n    }\n    if (event) {\n      event.preventDefault();\n    }\n    if (this.config.closeInterceptor) {\n      this.config.closeInterceptor().then(() => this._hide(), () => undefined);\n      return;\n    }\n    this._hide();\n  }\n  /** Private methods @internal */\n  /**\n   *  Manually close modal\n   *  @internal\n   */\n  _hide() {\n    this.onHide.emit(this);\n    window$1.clearTimeout(this.timerHideModal);\n    window$1.clearTimeout(this.timerRmBackDrop);\n    this._isShown = false;\n    this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.IN);\n    if (!isBs3()) {\n      this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.SHOW);\n    }\n    // this._addClassIn = false;\n    if (this._config.animated) {\n      this.timerHideModal = window$1.setTimeout(() => this.hideModal(), TRANSITION_DURATION);\n    } else {\n      this.hideModal();\n    }\n  }\n  getConfig(config) {\n    return Object.assign({}, this._config, config);\n  }\n  /**\n   *  Show dialog\n   *  @internal\n   */\n  showElement() {\n    // todo: replace this with component loader usage\n    if (!this._element.nativeElement.parentNode || this._element.nativeElement.parentNode.nodeType !== Node.ELEMENT_NODE) {\n      // don't move modals dom position\n      if (document$1 && document$1.body) {\n        document$1.body.appendChild(this._element.nativeElement);\n      }\n    }\n    this._renderer.setAttribute(this._element.nativeElement, 'aria-hidden', 'false');\n    this._renderer.setAttribute(this._element.nativeElement, 'aria-modal', 'true');\n    this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n    this._renderer.setProperty(this._element.nativeElement, 'scrollTop', 0);\n    if (this._config.animated) {\n      Utils.reflow(this._element.nativeElement);\n    }\n    // this._addClassIn = true;\n    this._renderer.addClass(this._element.nativeElement, CLASS_NAME.IN);\n    if (!isBs3()) {\n      this._renderer.addClass(this._element.nativeElement, CLASS_NAME.SHOW);\n    }\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._element.nativeElement.focus();\n      }\n      this.onShown.emit(this);\n    };\n    if (this._config.animated) {\n      setTimeout(transitionComplete, TRANSITION_DURATION);\n    } else {\n      transitionComplete();\n    }\n  }\n  /** @internal */\n  hideModal() {\n    this._renderer.setAttribute(this._element.nativeElement, 'aria-hidden', 'true');\n    this._renderer.setStyle(this._element.nativeElement, 'display', 'none');\n    this.showBackdrop(() => {\n      if (!this.isNested) {\n        if (document$1 && document$1.body) {\n          this._renderer.removeClass(document$1.body, CLASS_NAME.OPEN);\n          this._renderer.setStyle(document$1.body, 'overflow-y', '');\n        }\n        this.resetScrollbar();\n      }\n      this.resetAdjustments();\n      this.focusOtherModal();\n      this.onHidden.emit(this);\n    });\n  }\n  // todo: original show was calling a callback when done, but we can use\n  // promise\n  /** @internal */\n  showBackdrop(callback) {\n    if (this._isShown && this.config.backdrop && (!this.backdrop || !this.backdrop.instance.isShown)) {\n      this.removeBackdrop();\n      this._backdrop.attach(ModalBackdropComponent).to('body').show({\n        isAnimated: this._config.animated\n      });\n      this.backdrop = this._backdrop._componentRef;\n      if (!callback) {\n        return;\n      }\n      if (!this._config.animated) {\n        callback();\n        return;\n      }\n      setTimeout(callback, BACKDROP_TRANSITION_DURATION);\n    } else if (!this._isShown && this.backdrop) {\n      this.backdrop.instance.isShown = false;\n      const callbackRemove = () => {\n        this.removeBackdrop();\n        if (callback) {\n          callback();\n        }\n      };\n      if (this.backdrop.instance.isAnimated) {\n        this.timerRmBackDrop = window$1.setTimeout(callbackRemove, BACKDROP_TRANSITION_DURATION);\n      } else {\n        callbackRemove();\n      }\n    } else if (callback) {\n      callback();\n    }\n  }\n  /** @internal */\n  removeBackdrop() {\n    this._backdrop.hide();\n  }\n  /** Events tricks */\n  // no need for it\n  // protected setEscapeEvent():void {\n  //   if (this._isShown && this._config.keyboard) {\n  //     $(this._element).on(Event.KEYDOWN_DISMISS, (event) => {\n  //       if (event.which === 27) {\n  //         this.hide()\n  //       }\n  //     })\n  //\n  //   } else if (!this._isShown) {\n  //     $(this._element).off(Event.KEYDOWN_DISMISS)\n  //   }\n  // }\n  // protected setResizeEvent():void {\n  // console.log(this.renderer.listenGlobal('', Event.RESIZE));\n  // if (this._isShown) {\n  //   $(window).on(Event.RESIZE, $.proxy(this._handleUpdate, this))\n  // } else {\n  //   $(window).off(Event.RESIZE)\n  // }\n  // }\n  focusOtherModal() {\n    if (this._element.nativeElement.parentElement == null) {\n      return;\n    }\n    const otherOpenedModals = this._element.nativeElement.parentElement.querySelectorAll('.in[bsModal]');\n    if (!otherOpenedModals.length) {\n      return;\n    }\n    otherOpenedModals[otherOpenedModals.length - 1].focus();\n  }\n  /** @internal */\n  resetAdjustments() {\n    this._renderer.setStyle(this._element.nativeElement, 'paddingLeft', '');\n    this._renderer.setStyle(this._element.nativeElement, 'paddingRight', '');\n  }\n  /** Scroll bar tricks */\n  /** @internal */\n  checkScrollbar() {\n    this.isBodyOverflowing = document$1.body.clientWidth < window$1.innerWidth;\n    this.scrollbarWidth = this.getScrollbarWidth();\n  }\n  setScrollbar() {\n    if (!document$1) {\n      return;\n    }\n    this.originalBodyPadding = parseInt(window$1.getComputedStyle(document$1.body).getPropertyValue('padding-right') || 0, 10);\n    if (this.isBodyOverflowing) {\n      document$1.body.style.paddingRight = `${this.originalBodyPadding + this.scrollbarWidth}px`;\n    }\n  }\n  resetScrollbar() {\n    document$1.body.style.paddingRight = `${this.originalBodyPadding}px`;\n  }\n  // thx d.walsh\n  getScrollbarWidth() {\n    const scrollDiv = this._renderer.createElement('div');\n    this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n    this._renderer.appendChild(document$1.body, scrollDiv);\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    this._renderer.removeChild(document$1.body, scrollDiv);\n    return scrollbarWidth;\n  }\n}\nModalDirective.decorators = [{\n  type: Directive,\n  args: [{\n    selector: '[bsModal]',\n    exportAs: 'bs-modal'\n  }]\n}];\nModalDirective.ctorParameters = () => [{\n  type: ElementRef\n}, {\n  type: ViewContainerRef\n}, {\n  type: Renderer2\n}, {\n  type: ComponentLoaderFactory\n}, {\n  type: ModalOptions,\n  decorators: [{\n    type: Optional\n  }, {\n    type: Inject,\n    args: [MODAL_CONFIG_DEFAULT_OVERRIDE]\n  }]\n}];\nModalDirective.propDecorators = {\n  config: [{\n    type: Input\n  }],\n  closeInterceptor: [{\n    type: Input\n  }],\n  onShow: [{\n    type: Output\n  }],\n  onShown: [{\n    type: Output\n  }],\n  onHide: [{\n    type: Output\n  }],\n  onHidden: [{\n    type: Output\n  }],\n  onClickStarted: [{\n    type: HostListener,\n    args: ['mousedown', ['$event']]\n  }],\n  onClickStop: [{\n    type: HostListener,\n    args: ['mouseup', ['$event']]\n  }],\n  onEsc: [{\n    type: HostListener,\n    args: ['keydown.esc', ['$event']]\n  }]\n};\nlet currentId = 1;\nclass BsModalService {\n  constructor(rendererFactory, clf, modalDefaultOption) {\n    this.clf = clf;\n    this.modalDefaultOption = modalDefaultOption;\n    this.onShow = new EventEmitter();\n    this.onShown = new EventEmitter();\n    this.onHide = new EventEmitter();\n    this.onHidden = new EventEmitter();\n    this.isBodyOverflowing = false;\n    this.originalBodyPadding = 0;\n    this.scrollbarWidth = 0;\n    this.modalsCount = 0;\n    this.loaders = [];\n    this._backdropLoader = this.clf.createLoader();\n    this._renderer = rendererFactory.createRenderer(null, null);\n    this.config = modalDefaultOption ? Object.assign({}, modalConfigDefaults, modalDefaultOption) : modalConfigDefaults;\n  }\n  /** Shows a modal */\n  show(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  content, config) {\n    this.modalsCount++;\n    this._createLoaders();\n    // must be different per every show() call\n    const id = (config === null || config === void 0 ? void 0 : config.id) || currentId++;\n    this.config = this.modalDefaultOption ? Object.assign({}, modalConfigDefaults, this.modalDefaultOption, config) : Object.assign({}, modalConfigDefaults, config);\n    this.config.id = id;\n    this._showBackdrop();\n    this.lastDismissReason = void 0;\n    return this._showModal(content);\n  }\n  hide(id) {\n    if (this.modalsCount === 1 || id == null) {\n      this._hideBackdrop();\n      this.resetScrollbar();\n    }\n    this.modalsCount = this.modalsCount >= 1 && id != null ? this.modalsCount - 1 : 0;\n    setTimeout(() => {\n      this._hideModal(id);\n      this.removeLoaders(id);\n    }, this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0);\n  }\n  _showBackdrop() {\n    const isBackdropEnabled = this.config.backdrop === true || this.config.backdrop === 'static';\n    const isBackdropInDOM = !this.backdropRef || !this.backdropRef.instance.isShown;\n    if (this.modalsCount === 1) {\n      this.removeBackdrop();\n      if (isBackdropEnabled && isBackdropInDOM) {\n        this._backdropLoader.attach(ModalBackdropComponent).to('body').show({\n          isAnimated: this.config.animated\n        });\n        this.backdropRef = this._backdropLoader._componentRef;\n      }\n    }\n  }\n  _hideBackdrop() {\n    if (!this.backdropRef) {\n      return;\n    }\n    this.backdropRef.instance.isShown = false;\n    const duration = this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0;\n    setTimeout(() => this.removeBackdrop(), duration);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _showModal(content) {\n    var _a;\n    const modalLoader = this.loaders[this.loaders.length - 1];\n    if (this.config && this.config.providers) {\n      for (const provider of this.config.providers) {\n        modalLoader.provide(provider);\n      }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const bsModalRef = new BsModalRef();\n    const modalContainerRef = modalLoader.provide({\n      provide: ModalOptions,\n      useValue: this.config\n    }).provide({\n      provide: BsModalRef,\n      useValue: bsModalRef\n    }).attach(ModalContainerComponent).to('body');\n    bsModalRef.hide = () => {\n      var _a;\n      return (_a = modalContainerRef.instance) === null || _a === void 0 ? void 0 : _a.hide();\n    };\n    bsModalRef.setClass = newClass => {\n      if (modalContainerRef.instance) {\n        modalContainerRef.instance.config.class = newClass;\n      }\n    };\n    bsModalRef.onHidden = new EventEmitter();\n    bsModalRef.onHide = new EventEmitter();\n    this.copyEvent(modalLoader.onBeforeHide, bsModalRef.onHide);\n    this.copyEvent(modalLoader.onHidden, bsModalRef.onHidden);\n    // call 'show' method after assign setClass in bsModalRef.\n    // it makes modal component's bsModalRef available to call setClass method\n    modalContainerRef.show({\n      content,\n      isAnimated: this.config.animated,\n      initialState: this.config.initialState,\n      bsModalService: this,\n      id: this.config.id\n    });\n    if (modalContainerRef.instance) {\n      modalContainerRef.instance.level = this.getModalsCount();\n      bsModalRef.content = modalLoader.getInnerComponent();\n      bsModalRef.id = (_a = modalContainerRef.instance.config) === null || _a === void 0 ? void 0 : _a.id;\n    }\n    return bsModalRef;\n  }\n  _hideModal(id) {\n    if (id != null) {\n      const indexToRemove = this.loaders.findIndex(loader => {\n        var _a;\n        return ((_a = loader.instance) === null || _a === void 0 ? void 0 : _a.config.id) === id;\n      });\n      const modalLoader = this.loaders[indexToRemove];\n      if (modalLoader) {\n        modalLoader.hide(id);\n      }\n    } else {\n      this.loaders.forEach(loader => {\n        if (loader.instance) {\n          loader.hide(loader.instance.config.id);\n        }\n      });\n    }\n  }\n  getModalsCount() {\n    return this.modalsCount;\n  }\n  setDismissReason(reason) {\n    this.lastDismissReason = reason;\n  }\n  removeBackdrop() {\n    this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n    this._renderer.setStyle(document.body, 'overflow-y', '');\n    this._backdropLoader.hide();\n    this.backdropRef = void 0;\n  }\n  /** Checks if the body is overflowing and sets scrollbar width */\n  /** @internal */\n  checkScrollbar() {\n    this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\n    this.scrollbarWidth = this.getScrollbarWidth();\n  }\n  setScrollbar() {\n    if (!document) {\n      return;\n    }\n    this.originalBodyPadding = parseInt(window.getComputedStyle(document.body).getPropertyValue('padding-right') || '0', 10);\n    if (this.isBodyOverflowing) {\n      document.body.style.paddingRight = `${this.originalBodyPadding + this.scrollbarWidth}px`;\n    }\n  }\n  resetScrollbar() {\n    document.body.style.paddingRight = `${this.originalBodyPadding}px`;\n  }\n  // thx d.walsh\n  getScrollbarWidth() {\n    const scrollDiv = this._renderer.createElement('div');\n    this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n    this._renderer.appendChild(document.body, scrollDiv);\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    this._renderer.removeChild(document.body, scrollDiv);\n    return scrollbarWidth;\n  }\n  _createLoaders() {\n    const loader = this.clf.createLoader();\n    this.copyEvent(loader.onBeforeShow, this.onShow);\n    this.copyEvent(loader.onShown, this.onShown);\n    this.copyEvent(loader.onBeforeHide, this.onHide);\n    this.copyEvent(loader.onHidden, this.onHidden);\n    this.loaders.push(loader);\n  }\n  removeLoaders(id) {\n    if (id != null) {\n      const indexToRemove = this.loaders.findIndex(loader => {\n        var _a;\n        return ((_a = loader.instance) === null || _a === void 0 ? void 0 : _a.config.id) === id;\n      });\n      if (indexToRemove >= 0) {\n        this.loaders.splice(indexToRemove, 1);\n        this.loaders.forEach((loader, i) => {\n          if (loader.instance) {\n            loader.instance.level = i + 1;\n          }\n        });\n      }\n    } else {\n      this.loaders.splice(0, this.loaders.length);\n    }\n  }\n  copyEvent(from, to) {\n    from.subscribe(data => {\n      to.emit(this.lastDismissReason || data);\n    });\n  }\n}\nBsModalService.decorators = [{\n  type: Injectable\n}];\nBsModalService.ctorParameters = () => [{\n  type: RendererFactory2\n}, {\n  type: ComponentLoaderFactory\n}, {\n  type: ModalOptions,\n  decorators: [{\n    type: Optional\n  }, {\n    type: Inject,\n    args: [MODAL_CONFIG_DEFAULT_OVERRIDE]\n  }]\n}];\nconst focusTrapModule = FocusTrapModule.forRoot();\nclass ModalModule {\n  static forRoot() {\n    return {\n      ngModule: ModalModule,\n      providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n    };\n  }\n  static forChild() {\n    return {\n      ngModule: ModalModule,\n      providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n    };\n  }\n}\nModalModule.decorators = [{\n  type: NgModule,\n  args: [{\n    imports: [FocusTrapModule],\n    declarations: [ModalBackdropComponent, ModalDirective, ModalContainerComponent],\n    exports: [ModalBackdropComponent, ModalDirective],\n    entryComponents: [ModalBackdropComponent, ModalContainerComponent]\n  }]\n}];\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BsModalRef, BsModalService, MODAL_CONFIG_DEFAULT_OVERRIDE, ModalBackdropComponent, ModalBackdropOptions, ModalContainerComponent, ModalDirective, ModalModule, ModalOptions, CLASS_NAME as ɵa };","map":{"version":3,"names":["Injectable","InjectionToken","Component","ElementRef","Renderer2","HostListener","EventEmitter","Directive","ViewContainerRef","Optional","Inject","Input","Output","RendererFactory2","NgModule","isBs3","Utils","document","document$1","window","window$1","ComponentLoaderFactory","PositioningService","FocusTrapModule","BsModalRef","constructor","hide","setClass","decorators","type","ModalBackdropOptions","options","animate","Object","assign","ModalOptions","modalConfigDefaults","backdrop","keyboard","focus","show","ignoreBackdropClick","class","animated","initialState","closeInterceptor","MODAL_CONFIG_DEFAULT_OVERRIDE","CLASS_NAME","SCROLLBAR_MEASURER","BACKDROP","OPEN","FADE","IN","SHOW","SELECTOR","DIALOG","DATA_TOGGLE","DATA_DISMISS","FIXED_CONTENT","TRANSITION_DURATIONS","MODAL","DISMISS_REASONS","BACKRDOP","ESC","BACK","ModalContainerComponent","_element","_renderer","isShown","isAnimated","isModalHiding","clickStartedInContent","config","ngOnInit","addClass","nativeElement","setStyle","setTimeout","body","bsModalService","getModalsCount","checkScrollbar","setScrollbar","onClickStarted","event","target","onClickStop","_a","clickedInBackdrop","setDismissReason","onPopState","onEsc","_b","keyCode","key","preventDefault","level","ngOnDestroy","_hide","then","undefined","removeClass","id","args","selector","template","host","role","tabindex","ctorParameters","propDecorators","ModalBackdropComponent","element","renderer","_isAnimated","_isShown","value","reflow","TRANSITION_DURATION","BACKDROP_TRANSITION_DURATION","ModalDirective","_viewContainerRef","clf","modalDefaultOption","onShow","onShown","onHide","onHidden","isBodyOverflowing","originalBodyPadding","scrollbarWidth","timerHideModal","timerRmBackDrop","isNested","_backdrop","createLoader","_config","conf","getConfig","dismissReason","hideModal","dispose","toggle","emit","clearTimeout","classList","contains","showBackdrop","showElement","parentNode","nodeType","Node","ELEMENT_NODE","appendChild","setAttribute","setProperty","transitionComplete","resetScrollbar","resetAdjustments","focusOtherModal","callback","instance","removeBackdrop","attach","to","_componentRef","callbackRemove","parentElement","otherOpenedModals","querySelectorAll","length","clientWidth","innerWidth","getScrollbarWidth","parseInt","getComputedStyle","getPropertyValue","style","paddingRight","scrollDiv","createElement","offsetWidth","removeChild","exportAs","currentId","BsModalService","rendererFactory","modalsCount","loaders","_backdropLoader","createRenderer","content","_createLoaders","_showBackdrop","lastDismissReason","_showModal","_hideBackdrop","_hideModal","removeLoaders","isBackdropEnabled","isBackdropInDOM","backdropRef","duration","modalLoader","providers","provider","provide","bsModalRef","modalContainerRef","useValue","newClass","copyEvent","onBeforeHide","getInnerComponent","indexToRemove","findIndex","loader","forEach","reason","onBeforeShow","push","splice","i","from","subscribe","data","focusTrapModule","forRoot","ModalModule","ngModule","forChild","imports","declarations","exports","entryComponents","ɵa"],"sources":["D:/alodelivery test/node_modules/ngx-bootstrap/modal/fesm2015/ngx-bootstrap-modal.js"],"sourcesContent":["import { Injectable, InjectionToken, Component, ElementRef, Renderer2, HostListener, EventEmitter, Directive, ViewContainerRef, Optional, Inject, Input, Output, RendererFactory2, NgModule } from '@angular/core';\nimport { isBs3, Utils, document as document$1, window as window$1 } from 'ngx-bootstrap/utils';\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { PositioningService } from 'ngx-bootstrap/positioning';\nimport { FocusTrapModule } from 'ngx-bootstrap/focus-trap';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass BsModalRef {\n    constructor() {\n        /**\n         * Hides the modal\n         */\n        this.hide = () => void 0;\n        /**\n         * Sets new class to modal window\n         */\n        this.setClass = () => void 0;\n    }\n}\nBsModalRef.decorators = [\n    { type: Injectable }\n];\n\nclass ModalBackdropOptions {\n    constructor(options) {\n        this.animate = true;\n        Object.assign(this, options);\n    }\n}\n\nclass ModalOptions {\n}\nModalOptions.decorators = [\n    { type: Injectable }\n];\nconst modalConfigDefaults = {\n    backdrop: true,\n    keyboard: true,\n    focus: true,\n    show: false,\n    ignoreBackdropClick: false,\n    class: '',\n    animated: true,\n    initialState: {},\n    closeInterceptor: void 0\n};\nconst MODAL_CONFIG_DEFAULT_OVERRIDE = new InjectionToken('override-default-config');\nconst CLASS_NAME = {\n    SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\n    BACKDROP: 'modal-backdrop',\n    OPEN: 'modal-open',\n    FADE: 'fade',\n    IN: 'in',\n    SHOW: 'show' // bs4\n};\nconst SELECTOR = {\n    DIALOG: '.modal-dialog',\n    DATA_TOGGLE: '[data-toggle=\"modal\"]',\n    DATA_DISMISS: '[data-dismiss=\"modal\"]',\n    FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom, .is-fixed'\n};\nconst TRANSITION_DURATIONS = {\n    MODAL: 300,\n    BACKDROP: 150\n};\nconst DISMISS_REASONS = {\n    BACKRDOP: 'backdrop-click',\n    ESC: 'esc',\n    BACK: 'browser-back-navigation-clicked'\n};\n\nclass ModalContainerComponent {\n    constructor(options, _element, _renderer) {\n        this._element = _element;\n        this._renderer = _renderer;\n        this.isShown = false;\n        this.isAnimated = false;\n        this.isModalHiding = false;\n        this.clickStartedInContent = false;\n        this.config = Object.assign({}, options);\n    }\n    ngOnInit() {\n        if (this.isAnimated) {\n            this._renderer.addClass(this._element.nativeElement, CLASS_NAME.FADE);\n        }\n        this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n        setTimeout(() => {\n            this.isShown = true;\n            this._renderer.addClass(this._element.nativeElement, isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW);\n        }, this.isAnimated ? TRANSITION_DURATIONS.BACKDROP : 0);\n        if (document && document.body) {\n            if (this.bsModalService && this.bsModalService.getModalsCount() === 1) {\n                this.bsModalService.checkScrollbar();\n                this.bsModalService.setScrollbar();\n            }\n            this._renderer.addClass(document.body, CLASS_NAME.OPEN);\n            this._renderer.setStyle(document.body, 'overflow-y', 'hidden');\n        }\n        if (this._element.nativeElement) {\n            this._element.nativeElement.focus();\n        }\n    }\n    onClickStarted(event) {\n        this.clickStartedInContent = event.target !== this._element.nativeElement;\n    }\n    onClickStop(event) {\n        var _a;\n        const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n        if (this.config.ignoreBackdropClick ||\n            this.config.backdrop === 'static' ||\n            !clickedInBackdrop) {\n            this.clickStartedInContent = false;\n            return;\n        }\n        (_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.setDismissReason(DISMISS_REASONS.BACKRDOP);\n        this.hide();\n    }\n    onPopState() {\n        var _a;\n        (_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.setDismissReason(DISMISS_REASONS.BACK);\n        this.hide();\n    }\n    onEsc(event) {\n        var _a, _b;\n        if (!this.isShown) {\n            return;\n        }\n        if (event.keyCode === 27 || event.key === 'Escape') {\n            event.preventDefault();\n        }\n        if (this.config.keyboard &&\n            this.level === ((_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.getModalsCount())) {\n            (_b = this.bsModalService) === null || _b === void 0 ? void 0 : _b.setDismissReason(DISMISS_REASONS.ESC);\n            this.hide();\n        }\n    }\n    ngOnDestroy() {\n        if (this.isShown) {\n            this._hide();\n        }\n    }\n    hide() {\n        if (this.isModalHiding || !this.isShown) {\n            return;\n        }\n        if (this.config.closeInterceptor) {\n            this.config.closeInterceptor().then(() => this._hide(), () => undefined);\n            return;\n        }\n        this._hide();\n    }\n    _hide() {\n        this.isModalHiding = true;\n        this._renderer.removeClass(this._element.nativeElement, isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW);\n        setTimeout(() => {\n            var _a, _b;\n            this.isShown = false;\n            if (document &&\n                document.body &&\n                ((_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.getModalsCount()) === 1) {\n                this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n                this._renderer.setStyle(document.body, 'overflow-y', '');\n            }\n            (_b = this.bsModalService) === null || _b === void 0 ? void 0 : _b.hide(this.config.id);\n            this.isModalHiding = false;\n        }, this.isAnimated ? TRANSITION_DURATIONS.MODAL : 0);\n    }\n}\nModalContainerComponent.decorators = [\n    { type: Component, args: [{\n                selector: 'modal-container',\n                template: `\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\"\n         role=\"document\"\n         focusTrap>\n      <div class=\"modal-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  `,\n                // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n                host: {\n                    class: 'modal',\n                    role: 'dialog',\n                    tabindex: '-1',\n                    '[attr.aria-modal]': 'true',\n                    '[attr.aria-labelledby]': 'config.ariaLabelledBy',\n                    '[attr.aria-describedby]': 'config.ariaDescribedby'\n                }\n            },] }\n];\nModalContainerComponent.ctorParameters = () => [\n    { type: ModalOptions },\n    { type: ElementRef },\n    { type: Renderer2 }\n];\nModalContainerComponent.propDecorators = {\n    onClickStarted: [{ type: HostListener, args: ['mousedown', ['$event'],] }],\n    onClickStop: [{ type: HostListener, args: ['click', ['$event'],] }],\n    onPopState: [{ type: HostListener, args: ['window:popstate',] }],\n    onEsc: [{ type: HostListener, args: ['window:keydown.esc', ['$event'],] }]\n};\n\n/** This component will be added as background layout for modals if enabled */\nclass ModalBackdropComponent {\n    constructor(element, renderer) {\n        this._isAnimated = false;\n        this._isShown = false;\n        this.element = element;\n        this.renderer = renderer;\n    }\n    get isAnimated() {\n        return this._isAnimated;\n    }\n    set isAnimated(value) {\n        this._isAnimated = value;\n    }\n    get isShown() {\n        return this._isShown;\n    }\n    set isShown(value) {\n        this._isShown = value;\n        if (value) {\n            this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\n        }\n        else {\n            this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\n        }\n        if (!isBs3()) {\n            if (value) {\n                this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.SHOW}`);\n            }\n            else {\n                this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.SHOW}`);\n            }\n        }\n    }\n    ngOnInit() {\n        if (this.isAnimated) {\n            this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.FADE}`);\n            Utils.reflow(this.element.nativeElement);\n        }\n        this.isShown = true;\n    }\n}\nModalBackdropComponent.decorators = [\n    { type: Component, args: [{\n                selector: 'bs-modal-backdrop',\n                template: ' ',\n                // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n                host: { class: CLASS_NAME.BACKDROP }\n            },] }\n];\nModalBackdropComponent.ctorParameters = () => [\n    { type: ElementRef },\n    { type: Renderer2 }\n];\n\n// todo: should we support enforce focus in?\nconst TRANSITION_DURATION = 300;\nconst BACKDROP_TRANSITION_DURATION = 150;\n/** Mark any code with directive to show it's content in modal */\nclass ModalDirective {\n    constructor(_element, _viewContainerRef, _renderer, clf, modalDefaultOption) {\n        this._element = _element;\n        this._renderer = _renderer;\n        /** This event fires immediately when the `show` instance method is called. */\n        this.onShow = new EventEmitter();\n        /** This event is fired when the modal has been made visible to the user\n         * (will wait for CSS transitions to complete)\n         */\n        this.onShown = new EventEmitter();\n        /** This event is fired immediately when\n         * the hide instance method has been called.\n         */\n        this.onHide = new EventEmitter();\n        /** This event is fired when the modal has finished being\n         * hidden from the user (will wait for CSS transitions to complete).\n         */\n        this.onHidden = new EventEmitter();\n        this._isShown = false;\n        this.isBodyOverflowing = false;\n        this.originalBodyPadding = 0;\n        this.scrollbarWidth = 0;\n        this.timerHideModal = 0;\n        this.timerRmBackDrop = 0;\n        this.isNested = false;\n        this.clickStartedInContent = false;\n        this._backdrop = clf.createLoader(_element, _viewContainerRef, _renderer);\n        this._config = modalDefaultOption || modalConfigDefaults;\n    }\n    /** allows to set modal configuration via element property */\n    set config(conf) {\n        this._config = this.getConfig(conf);\n    }\n    get config() {\n        return this._config;\n    }\n    get isShown() {\n        return this._isShown;\n    }\n    onClickStarted(event) {\n        this.clickStartedInContent = event.target !== this._element.nativeElement;\n    }\n    onClickStop(event) {\n        const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n        if (this.config.ignoreBackdropClick ||\n            this.config.backdrop === 'static' ||\n            !clickedInBackdrop) {\n            this.clickStartedInContent = false;\n            return;\n        }\n        this.dismissReason = DISMISS_REASONS.BACKRDOP;\n        this.hide(event);\n    }\n    // todo: consider preventing default and stopping propagation\n    onEsc(event) {\n        if (!this._isShown) {\n            return;\n        }\n        if (event.keyCode === 27 || event.key === 'Escape') {\n            event.preventDefault();\n        }\n        if (this.config.keyboard) {\n            this.dismissReason = DISMISS_REASONS.ESC;\n            this.hide();\n        }\n    }\n    ngOnDestroy() {\n        if (this._isShown) {\n            this._isShown = false;\n            this.hideModal();\n            this._backdrop.dispose();\n        }\n    }\n    ngOnInit() {\n        this._config = this._config || this.getConfig();\n        setTimeout(() => {\n            if (this._config.show) {\n                this.show();\n            }\n        }, 0);\n    }\n    /* Public methods */\n    /** Allows to manually toggle modal visibility */\n    toggle() {\n        return this._isShown ? this.hide() : this.show();\n    }\n    /** Allows to manually open modal */\n    show() {\n        this.dismissReason = void 0;\n        this.onShow.emit(this);\n        if (this._isShown) {\n            return;\n        }\n        clearTimeout(this.timerHideModal);\n        clearTimeout(this.timerRmBackDrop);\n        this._isShown = true;\n        this.checkScrollbar();\n        this.setScrollbar();\n        if (document$1 && document$1.body) {\n            if (document$1.body.classList.contains(CLASS_NAME.OPEN)) {\n                this.isNested = true;\n            }\n            else {\n                this._renderer.addClass(document$1.body, CLASS_NAME.OPEN);\n                this._renderer.setStyle(document$1.body, 'overflow-y', 'hidden');\n            }\n        }\n        this.showBackdrop(() => {\n            this.showElement();\n        });\n    }\n    /** Check if we can close the modal */\n    hide(event) {\n        if (!this._isShown) {\n            return;\n        }\n        if (event) {\n            event.preventDefault();\n        }\n        if (this.config.closeInterceptor) {\n            this.config.closeInterceptor().then(() => this._hide(), () => undefined);\n            return;\n        }\n        this._hide();\n    }\n    /** Private methods @internal */\n    /**\n     *  Manually close modal\n     *  @internal\n     */\n    _hide() {\n        this.onHide.emit(this);\n        window$1.clearTimeout(this.timerHideModal);\n        window$1.clearTimeout(this.timerRmBackDrop);\n        this._isShown = false;\n        this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.IN);\n        if (!isBs3()) {\n            this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.SHOW);\n        }\n        // this._addClassIn = false;\n        if (this._config.animated) {\n            this.timerHideModal = window$1.setTimeout(() => this.hideModal(), TRANSITION_DURATION);\n        }\n        else {\n            this.hideModal();\n        }\n    }\n    getConfig(config) {\n        return Object.assign({}, this._config, config);\n    }\n    /**\n     *  Show dialog\n     *  @internal\n     */\n    showElement() {\n        // todo: replace this with component loader usage\n        if (!this._element.nativeElement.parentNode ||\n            this._element.nativeElement.parentNode.nodeType !== Node.ELEMENT_NODE) {\n            // don't move modals dom position\n            if (document$1 && document$1.body) {\n                document$1.body.appendChild(this._element.nativeElement);\n            }\n        }\n        this._renderer.setAttribute(this._element.nativeElement, 'aria-hidden', 'false');\n        this._renderer.setAttribute(this._element.nativeElement, 'aria-modal', 'true');\n        this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n        this._renderer.setProperty(this._element.nativeElement, 'scrollTop', 0);\n        if (this._config.animated) {\n            Utils.reflow(this._element.nativeElement);\n        }\n        // this._addClassIn = true;\n        this._renderer.addClass(this._element.nativeElement, CLASS_NAME.IN);\n        if (!isBs3()) {\n            this._renderer.addClass(this._element.nativeElement, CLASS_NAME.SHOW);\n        }\n        const transitionComplete = () => {\n            if (this._config.focus) {\n                this._element.nativeElement.focus();\n            }\n            this.onShown.emit(this);\n        };\n        if (this._config.animated) {\n            setTimeout(transitionComplete, TRANSITION_DURATION);\n        }\n        else {\n            transitionComplete();\n        }\n    }\n    /** @internal */\n    hideModal() {\n        this._renderer.setAttribute(this._element.nativeElement, 'aria-hidden', 'true');\n        this._renderer.setStyle(this._element.nativeElement, 'display', 'none');\n        this.showBackdrop(() => {\n            if (!this.isNested) {\n                if (document$1 && document$1.body) {\n                    this._renderer.removeClass(document$1.body, CLASS_NAME.OPEN);\n                    this._renderer.setStyle(document$1.body, 'overflow-y', '');\n                }\n                this.resetScrollbar();\n            }\n            this.resetAdjustments();\n            this.focusOtherModal();\n            this.onHidden.emit(this);\n        });\n    }\n    // todo: original show was calling a callback when done, but we can use\n    // promise\n    /** @internal */\n    showBackdrop(callback) {\n        if (this._isShown &&\n            this.config.backdrop &&\n            (!this.backdrop || !this.backdrop.instance.isShown)) {\n            this.removeBackdrop();\n            this._backdrop\n                .attach(ModalBackdropComponent)\n                .to('body')\n                .show({ isAnimated: this._config.animated });\n            this.backdrop = this._backdrop._componentRef;\n            if (!callback) {\n                return;\n            }\n            if (!this._config.animated) {\n                callback();\n                return;\n            }\n            setTimeout(callback, BACKDROP_TRANSITION_DURATION);\n        }\n        else if (!this._isShown && this.backdrop) {\n            this.backdrop.instance.isShown = false;\n            const callbackRemove = () => {\n                this.removeBackdrop();\n                if (callback) {\n                    callback();\n                }\n            };\n            if (this.backdrop.instance.isAnimated) {\n                this.timerRmBackDrop = window$1.setTimeout(callbackRemove, BACKDROP_TRANSITION_DURATION);\n            }\n            else {\n                callbackRemove();\n            }\n        }\n        else if (callback) {\n            callback();\n        }\n    }\n    /** @internal */\n    removeBackdrop() {\n        this._backdrop.hide();\n    }\n    /** Events tricks */\n    // no need for it\n    // protected setEscapeEvent():void {\n    //   if (this._isShown && this._config.keyboard) {\n    //     $(this._element).on(Event.KEYDOWN_DISMISS, (event) => {\n    //       if (event.which === 27) {\n    //         this.hide()\n    //       }\n    //     })\n    //\n    //   } else if (!this._isShown) {\n    //     $(this._element).off(Event.KEYDOWN_DISMISS)\n    //   }\n    // }\n    // protected setResizeEvent():void {\n    // console.log(this.renderer.listenGlobal('', Event.RESIZE));\n    // if (this._isShown) {\n    //   $(window).on(Event.RESIZE, $.proxy(this._handleUpdate, this))\n    // } else {\n    //   $(window).off(Event.RESIZE)\n    // }\n    // }\n    focusOtherModal() {\n        if (this._element.nativeElement.parentElement == null) {\n            return;\n        }\n        const otherOpenedModals = this._element.nativeElement.parentElement.querySelectorAll('.in[bsModal]');\n        if (!otherOpenedModals.length) {\n            return;\n        }\n        otherOpenedModals[otherOpenedModals.length - 1].focus();\n    }\n    /** @internal */\n    resetAdjustments() {\n        this._renderer.setStyle(this._element.nativeElement, 'paddingLeft', '');\n        this._renderer.setStyle(this._element.nativeElement, 'paddingRight', '');\n    }\n    /** Scroll bar tricks */\n    /** @internal */\n    checkScrollbar() {\n        this.isBodyOverflowing = document$1.body.clientWidth < window$1.innerWidth;\n        this.scrollbarWidth = this.getScrollbarWidth();\n    }\n    setScrollbar() {\n        if (!document$1) {\n            return;\n        }\n        this.originalBodyPadding = parseInt(window$1\n            .getComputedStyle(document$1.body)\n            .getPropertyValue('padding-right') || 0, 10);\n        if (this.isBodyOverflowing) {\n            document$1.body.style.paddingRight = `${this.originalBodyPadding +\n                this.scrollbarWidth}px`;\n        }\n    }\n    resetScrollbar() {\n        document$1.body.style.paddingRight = `${this.originalBodyPadding}px`;\n    }\n    // thx d.walsh\n    getScrollbarWidth() {\n        const scrollDiv = this._renderer.createElement('div');\n        this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n        this._renderer.appendChild(document$1.body, scrollDiv);\n        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        this._renderer.removeChild(document$1.body, scrollDiv);\n        return scrollbarWidth;\n    }\n}\nModalDirective.decorators = [\n    { type: Directive, args: [{\n                selector: '[bsModal]',\n                exportAs: 'bs-modal'\n            },] }\n];\nModalDirective.ctorParameters = () => [\n    { type: ElementRef },\n    { type: ViewContainerRef },\n    { type: Renderer2 },\n    { type: ComponentLoaderFactory },\n    { type: ModalOptions, decorators: [{ type: Optional }, { type: Inject, args: [MODAL_CONFIG_DEFAULT_OVERRIDE,] }] }\n];\nModalDirective.propDecorators = {\n    config: [{ type: Input }],\n    closeInterceptor: [{ type: Input }],\n    onShow: [{ type: Output }],\n    onShown: [{ type: Output }],\n    onHide: [{ type: Output }],\n    onHidden: [{ type: Output }],\n    onClickStarted: [{ type: HostListener, args: ['mousedown', ['$event'],] }],\n    onClickStop: [{ type: HostListener, args: ['mouseup', ['$event'],] }],\n    onEsc: [{ type: HostListener, args: ['keydown.esc', ['$event'],] }]\n};\n\nlet currentId = 1;\nclass BsModalService {\n    constructor(rendererFactory, clf, modalDefaultOption) {\n        this.clf = clf;\n        this.modalDefaultOption = modalDefaultOption;\n        this.onShow = new EventEmitter();\n        this.onShown = new EventEmitter();\n        this.onHide = new EventEmitter();\n        this.onHidden = new EventEmitter();\n        this.isBodyOverflowing = false;\n        this.originalBodyPadding = 0;\n        this.scrollbarWidth = 0;\n        this.modalsCount = 0;\n        this.loaders = [];\n        this._backdropLoader = this.clf.createLoader();\n        this._renderer = rendererFactory.createRenderer(null, null);\n        this.config = modalDefaultOption ?\n            (Object.assign({}, modalConfigDefaults, modalDefaultOption)) :\n            modalConfigDefaults;\n    }\n    /** Shows a modal */\n    show(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    content, config) {\n        this.modalsCount++;\n        this._createLoaders();\n        // must be different per every show() call\n        const id = (config === null || config === void 0 ? void 0 : config.id) || currentId++;\n        this.config = this.modalDefaultOption ?\n            Object.assign({}, modalConfigDefaults, this.modalDefaultOption, config) :\n            Object.assign({}, modalConfigDefaults, config);\n        this.config.id = id;\n        this._showBackdrop();\n        this.lastDismissReason = void 0;\n        return this._showModal(content);\n    }\n    hide(id) {\n        if (this.modalsCount === 1 || id == null) {\n            this._hideBackdrop();\n            this.resetScrollbar();\n        }\n        this.modalsCount = this.modalsCount >= 1 && id != null ? this.modalsCount - 1 : 0;\n        setTimeout(() => {\n            this._hideModal(id);\n            this.removeLoaders(id);\n        }, this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0);\n    }\n    _showBackdrop() {\n        const isBackdropEnabled = this.config.backdrop === true || this.config.backdrop === 'static';\n        const isBackdropInDOM = !this.backdropRef || !this.backdropRef.instance.isShown;\n        if (this.modalsCount === 1) {\n            this.removeBackdrop();\n            if (isBackdropEnabled && isBackdropInDOM) {\n                this._backdropLoader\n                    .attach(ModalBackdropComponent)\n                    .to('body')\n                    .show({ isAnimated: this.config.animated });\n                this.backdropRef = this._backdropLoader._componentRef;\n            }\n        }\n    }\n    _hideBackdrop() {\n        if (!this.backdropRef) {\n            return;\n        }\n        this.backdropRef.instance.isShown = false;\n        const duration = this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0;\n        setTimeout(() => this.removeBackdrop(), duration);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _showModal(content) {\n        var _a;\n        const modalLoader = this.loaders[this.loaders.length - 1];\n        if (this.config && this.config.providers) {\n            for (const provider of this.config.providers) {\n                modalLoader.provide(provider);\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const bsModalRef = new BsModalRef();\n        const modalContainerRef = modalLoader\n            .provide({ provide: ModalOptions, useValue: this.config })\n            .provide({ provide: BsModalRef, useValue: bsModalRef })\n            .attach(ModalContainerComponent)\n            .to('body');\n        bsModalRef.hide = () => { var _a; return (_a = modalContainerRef.instance) === null || _a === void 0 ? void 0 : _a.hide(); };\n        bsModalRef.setClass = (newClass) => {\n            if (modalContainerRef.instance) {\n                modalContainerRef.instance.config.class = newClass;\n            }\n        };\n        bsModalRef.onHidden = new EventEmitter();\n        bsModalRef.onHide = new EventEmitter();\n        this.copyEvent(modalLoader.onBeforeHide, bsModalRef.onHide);\n        this.copyEvent(modalLoader.onHidden, bsModalRef.onHidden);\n        // call 'show' method after assign setClass in bsModalRef.\n        // it makes modal component's bsModalRef available to call setClass method\n        modalContainerRef.show({\n            content,\n            isAnimated: this.config.animated,\n            initialState: this.config.initialState,\n            bsModalService: this,\n            id: this.config.id\n        });\n        if (modalContainerRef.instance) {\n            modalContainerRef.instance.level = this.getModalsCount();\n            bsModalRef.content = modalLoader.getInnerComponent();\n            bsModalRef.id = (_a = modalContainerRef.instance.config) === null || _a === void 0 ? void 0 : _a.id;\n        }\n        return bsModalRef;\n    }\n    _hideModal(id) {\n        if (id != null) {\n            const indexToRemove = this.loaders.findIndex(loader => { var _a; return ((_a = loader.instance) === null || _a === void 0 ? void 0 : _a.config.id) === id; });\n            const modalLoader = this.loaders[indexToRemove];\n            if (modalLoader) {\n                modalLoader.hide(id);\n            }\n        }\n        else {\n            this.loaders.forEach((loader) => {\n                if (loader.instance) {\n                    loader.hide(loader.instance.config.id);\n                }\n            });\n        }\n    }\n    getModalsCount() {\n        return this.modalsCount;\n    }\n    setDismissReason(reason) {\n        this.lastDismissReason = reason;\n    }\n    removeBackdrop() {\n        this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n        this._renderer.setStyle(document.body, 'overflow-y', '');\n        this._backdropLoader.hide();\n        this.backdropRef = void 0;\n    }\n    /** Checks if the body is overflowing and sets scrollbar width */\n    /** @internal */\n    checkScrollbar() {\n        this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\n        this.scrollbarWidth = this.getScrollbarWidth();\n    }\n    setScrollbar() {\n        if (!document) {\n            return;\n        }\n        this.originalBodyPadding = parseInt(window\n            .getComputedStyle(document.body)\n            .getPropertyValue('padding-right') || '0', 10);\n        if (this.isBodyOverflowing) {\n            document.body.style.paddingRight = `${this.originalBodyPadding +\n                this.scrollbarWidth}px`;\n        }\n    }\n    resetScrollbar() {\n        document.body.style.paddingRight = `${this.originalBodyPadding}px`;\n    }\n    // thx d.walsh\n    getScrollbarWidth() {\n        const scrollDiv = this._renderer.createElement('div');\n        this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n        this._renderer.appendChild(document.body, scrollDiv);\n        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        this._renderer.removeChild(document.body, scrollDiv);\n        return scrollbarWidth;\n    }\n    _createLoaders() {\n        const loader = this.clf.createLoader();\n        this.copyEvent(loader.onBeforeShow, this.onShow);\n        this.copyEvent(loader.onShown, this.onShown);\n        this.copyEvent(loader.onBeforeHide, this.onHide);\n        this.copyEvent(loader.onHidden, this.onHidden);\n        this.loaders.push(loader);\n    }\n    removeLoaders(id) {\n        if (id != null) {\n            const indexToRemove = this.loaders.findIndex(loader => { var _a; return ((_a = loader.instance) === null || _a === void 0 ? void 0 : _a.config.id) === id; });\n            if (indexToRemove >= 0) {\n                this.loaders.splice(indexToRemove, 1);\n                this.loaders.forEach((loader, i) => {\n                    if (loader.instance) {\n                        loader.instance.level = i + 1;\n                    }\n                });\n            }\n        }\n        else {\n            this.loaders.splice(0, this.loaders.length);\n        }\n    }\n    copyEvent(from, to) {\n        from.subscribe((data) => {\n            to.emit(this.lastDismissReason || data);\n        });\n    }\n}\nBsModalService.decorators = [\n    { type: Injectable }\n];\nBsModalService.ctorParameters = () => [\n    { type: RendererFactory2 },\n    { type: ComponentLoaderFactory },\n    { type: ModalOptions, decorators: [{ type: Optional }, { type: Inject, args: [MODAL_CONFIG_DEFAULT_OVERRIDE,] }] }\n];\n\nconst focusTrapModule = FocusTrapModule.forRoot();\nclass ModalModule {\n    static forRoot() {\n        return {\n            ngModule: ModalModule,\n            providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n        };\n    }\n    static forChild() {\n        return {\n            ngModule: ModalModule,\n            providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n        };\n    }\n}\nModalModule.decorators = [\n    { type: NgModule, args: [{\n                imports: [FocusTrapModule],\n                declarations: [\n                    ModalBackdropComponent,\n                    ModalDirective,\n                    ModalContainerComponent\n                ],\n                exports: [ModalBackdropComponent, ModalDirective],\n                entryComponents: [ModalBackdropComponent, ModalContainerComponent]\n            },] }\n];\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BsModalRef, BsModalService, MODAL_CONFIG_DEFAULT_OVERRIDE, ModalBackdropComponent, ModalBackdropOptions, ModalContainerComponent, ModalDirective, ModalModule, ModalOptions, CLASS_NAME as ɵa };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}